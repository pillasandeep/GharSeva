<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	  <meta name="description" content="Book expert AC repair and installation services in Yellamanchili. Affordable prices, quick service, and trusted technicians. Call now!">

	  <meta name="viewport" content="width=device-width, initial-scale=1.0">
	  <!-- Use Thymeleaf's resource resolver for linked CSS/JS and static assets -->
	  <link rel="stylesheet" th:href="@{https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css}">
	  <script th:src="@{https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js}"></script>
	  <script th:src="@{https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js}"></script>
	  <link rel="stylesheet" th:href="@{/css/style.css}">
	  <link rel="stylesheet" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css}">
	 
  <title>My Profile - CoolTech</title>
 <style>
	body {
	  font-family: 'Segoe UI', sans-serif;
	  background-color: #ffffff;
	  margin: 0;
	  padding: 0;
	  color: #333;
	}
	/* Common style for all statuses */
	.status {
	  display: inline-block;
	  padding: 4px 10px;
	  border-radius: 12px;
	  font-weight: 600;
	  font-size: 13px;
	}

	/* Pending = yellow */
	.status-pending {
	  background-color: #fff3cd;
	  color: #856404;
	  border: 1px solid #ffeeba;
	}

	/* Assigned = blue */
	.status-assigned {
	  background-color: #d1ecf1;
	  color: #0c5460;
	  border: 1px solid #bee5eb;
	}

	/* Completed = green */
	.status-completed {
	  background-color: #d4edda;
	  color: #155724;
	  border: 1px solid #c3e6cb;
	}

	/* Unknown = gray */
	.status-unknown {
	  background-color: #e2e3e5;
	  color: #383d41;
	  border: 1px solid #d6d8db;
	}

 </style>
</head>
<body>
  <!-- Include shared header fragment -->
  <div th:replace="~{fragments/header :: header}"></div>
  
  <div class="page-content container" style="padding-top: 80px;">
    <div class="panel panel-default" style="max-width: 400px; margin: auto;">
      <div class="panel-heading">
        <h3 class="panel-title">My Profile</h3>
      </div>
      <div class="panel-body">
        <p><strong>Name:</strong> <span th:text="${customer.name}">sample</span></p>
        <p><strong>Phone Number:</strong> <span th:text="${customer.phonenumber}">9010950284</span></p>
        <a th:href="@{/logout}" class="btn btn-danger btn-block">Log out</a>
      </div>
    </div>
  </div>
  <div class="container">
    <h3>Your Booking History:</h3>
    
	<div class="list-group" th:if="${historyList}">
	  <div class="list-group-item" th:each="booking : ${historyList}">
	    <h4 class="list-group-item-heading" th:text="${booking.servicename}">AC Repair</h4>
	    <p class="list-group-item-text">
	      <strong>Date:</strong> <span th:text="${booking.date}">2025-08-01</span><br>
	      <strong>Price:</strong> ‚Çπ<span th:text="${booking.price}">499</span><br>
	      
	      <!-- Status mapping -->
		  <strong>Status:</strong>
		  <span th:switch="${booking.state}">
		    <span th:case="'Pending'" class="status status-pending">‚è≥ Waiting for Admin Action</span>
		    <span th:case="'Assigned'" class="status status-assigned">üõ†Ô∏è Assigned to Technician</span>
		    <span th:case="'Completed'" class="status status-completed">‚úÖ Service Completed</span>
		    <span th:case="*" class="status status-unknown">‚ÑπÔ∏è Unknown Status</span>
		  </span>
	    </p>
	  </div>
	</div>

    <div th:if="${#lists.isEmpty(historyList)}" class="alert alert-info">
      No bookings found.
    </div>
  </div>


</body>
</html>
